<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Немецкий за 10 минут</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        .card { perspective: 1000px; }
        .card-inner { position: relative; transition: transform 0.6s; transform-style: preserve-3d; }
        .card.is-flipped .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; top: 0; left: 0; }
        .card-back { transform: rotateY(180deg); }
        @keyframes slide-left { from { transform: translateX(0); opacity: 1; } to { transform: translateX(-100%); opacity: 0; } }
        .card.slide-out { animation: slide-left 0.4s ease forwards; }
        .modal { transition: opacity 0.3s ease; }
        .modal-content { transition: transform 0.3s ease; transform: scale(0.95); }
        .modal.is-open { opacity: 1; }
        .modal.is-open .modal-content { transform: scale(1); }
    </style>
</head>
<body class="min-h-screen bg-gray-100 font-sans p-4">

<div id="app" class="max-w-md mx-auto">

    <!-- Загрузка -->
    <div id="loading-screen" class="text-center py-20"><p class="text-gray-500">Загрузка...</p></div>

    <!-- Главное меню -->
    <div id="home-screen" class="hidden">
        <h1 class="text-2xl font-bold text-center mb-8 text-gray-800">Немецкий за 10 минут</h1>
        <div class="space-y-4" id="main-content-block"></div>

        <button onclick="window.App.renderAllSetsScreen()" class="w-full py-5 bg-white rounded-xl shadow-lg text-lg font-semibold text-gray-800 flex justify-between items-center">
            <span>Все наборы слов</span> <span>→</span>
        </button>

        <div id="due-today-section" class="hidden pt-6 border-t border-gray-200">
            <h2 class="text-xl font-bold mb-4 flex items-center"><span>К повторению сегодня</span></h2>
            <div id="due-today-list" class="space-y-3"></div>
        </div>
    </div>

    <!-- Список наборов -->
    <div id="list-screen" class="hidden">
        <h1 id="list-title" class="text-2xl font-bold text-center mb-6"></h1>
        <div id="back-button-container" class="mb-4"></div>
        <div id="content-list" class="space-y-4"></div>
    </div>

    <!-- Повторение -->
    <div id="study-screen" class="hidden">
        <div class="bg-gray-200 rounded-full h-2.5 mb-4"><div id="progress-bar" class="bg-blue-500 h-2.5 rounded-full transition-all" style="width:0%"></div></div>
        <div id="card" class="card h-64 w-full mb-6">
            <div id="card-inner" class="card-inner h-full w-full" onclick="window.App.showAnswer()">
                <div id="card-front" class="card-front flex items-center justify-center p-6 bg-white rounded-xl shadow-lg text-center text-2xl font-semibold"></div>
                <div id="card-back" class="card-back flex items-center justify-center p-6 bg-blue-100 rounded-xl shadow-lg text-center text-2xl font-semibold"></div>
            </div>
        </div>
        <div id="controls-show" class="text-center">
            <button onclick="window.App.showAnswer()" class="w-full py-4 bg-blue-500 text-white font-bold rounded-xl shadow-md">Показать ответ</button>
        </div>
        <div id="controls-rate" class="hidden grid grid-cols-2 gap-4">
            <button onclick="window.App.handleAnswer(false)" class="py-4 bg-red-500 text-white font-bold rounded-xl">Не помню</button>
            <button onclick="window.App.handleAnswer(true)" class="py-4 bg-green-500 text-white font-bold rounded-xl">Помню</button>
        </div>
        <div class="text-center mt-6"><button onclick="window.App.renderHomeScreen()" class="text-gray-500">← В меню</button></div>
    </div>

    <div id="finish-screen" class="hidden text-center py-20">
        <h2 class="text-2xl font-bold mb-4">Сессия завершена!</h2>
        <p class="text-gray-600 mb-6">Все карточки пройдены</p>
        <button onclick="window.App.renderHomeScreen()" class="py-4 px-8 bg-blue-500 text-white font-bold rounded-xl">В меню</button>
    </div>
</div>

<!-- Модалка "Заблокировано" -->
<div id="locked-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50" onclick="window.App.closeModal('locked-modal')">
    <div class="bg-white rounded-3xl p-8 max-w-sm w-full mx-4 modal-content" onclick="event.stopPropagation()">
        <h3 class="text-2xl font-bold text-center mb-4">Доступ закрыт</h3>
        <p class="text-center text-gray-700 mb-8">Этот набор откроется после оплаты курса</p>
        <button onclick="Telegram.WebApp.openLink('https://t.me/твой_бот_оплаты')" class="w-full py-5 bg-green-500 text-white font-bold rounded-2xl">Получить доступ</button>
        <button onclick="window.App.closeModal('locked-modal')" class="w-full mt-3 py-3 text-gray-600">Позже</button>
    </div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>