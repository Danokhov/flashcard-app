flowchart TD
    Start([Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ])
    Start --> Home

    %% Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ°Ğ½
    Home[ğŸ  Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ<br/>home-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='home-screen']
    Home -->|ğŸ“š Ğ’ ÑƒÑ‡ĞµĞ±Ğµ<br/>renderAllSetsScreen| AllSets
    Home -->|ğŸ“– Ğ¢ĞµĞ¼Ñ‹<br/>renderTopicSelection| Topics

    %% Ğ­ĞºÑ€Ğ°Ğ½ Ğ’ ÑƒÑ‡ĞµĞ±Ğµ
    AllSets[ğŸ“š Ğ’ ÑƒÑ‡ĞµĞ±Ğµ<br/>list-screen<br/>Ğ’ÑĞµ Ğ½Ğ°Ğ±Ğ¾Ñ€Ñ‹ ÑĞ»Ğ¾Ğ²<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='list-screen']
    AllSets -->|Ğš Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ñƒ<br/>promptForDirection| DirModal1[Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:<br/>RUâ†’DE / DEâ†’RU<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>direction-modal]
    AllSets -->|ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ° Ğ²ÑĞµÑ… ÑĞ»Ğ¾Ğ²<br/>promptForDirection| DirModal2[Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:<br/>RUâ†’DE / DEâ†’RU<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>direction-modal]
    DirModal1 -->|startSession<br/>mode='review'| Review[Ğ¡ĞµÑÑĞ¸Ñ: Ğš Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ñƒ<br/>study-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='study-screen']
    DirModal2 -->|startSession<br/>mode='practice-all'| Practice[Ğ¡ĞµÑÑĞ¸Ñ: ĞŸÑ€Ğ°ĞºÑ‚Ğ¸ĞºĞ°<br/>study-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='study-screen']

    %% Ğ­ĞºÑ€Ğ°Ğ½ Ğ¢ĞµĞ¼Ñ‹
    Topics[ğŸ“– Ğ¢ĞµĞ¼Ñ‹<br/>topics-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='topics-screen']
    Topics -->|Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚ĞµĞ¼Ñ‹<br/>renderTopicWords| TopicWords[Ğ¡Ğ»Ğ¾Ğ²Ğ° Ğ¿Ğ¾ Ñ‚ĞµĞ¼Ğµ<br/>list-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='list-screen']
    Topics -->|Ğ£Ğ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ<br/>openExercisesModal| ExerciseModal[ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾<br/>Ğ£Ğ¿Ñ€Ğ°Ğ¶Ğ½ĞµĞ½Ğ¸Ñ<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>exercise-modal]

    %% Ğ¡Ğ»Ğ¾Ğ²Ğ° Ñ‚ĞµĞ¼Ñ‹
    TopicWords -->|ĞšĞ»Ğ¸Ğº Ğ½Ğ° ÑĞ»Ğ¾Ğ²Ğ¾<br/>openWordDetailScreen| WordDetail[Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°<br/>word-detail-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='word-detail-screen']
    TopicWords -->|ĞšĞ½Ğ¾Ğ¿ĞºĞ° Ğ£Ñ‡Ğ¸Ñ‚ÑŒ<br/>addToStudyList| AddToStudy1[addToStudyList<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ]

    %% Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°
    WordDetail[ğŸ” Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ÑĞ»Ğ¾Ğ²Ğ°<br/>word-detail-screen<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='word-detail-screen'<br/>ĞĞµĞ¼ĞµÑ†ĞºĞ¾Ğµ ÑĞ»Ğ¾Ğ²Ğ¾<br/>ğŸ”Š ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ<br/>Ğ¢Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ<br/>ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´<br/>Ğ§Ğ°ÑÑ‚ÑŒ Ñ€ĞµÑ‡Ğ¸<br/>Ğ¢ĞµĞ¼Ñ‹<br/>ĞŸÑ€Ğ¸Ğ¼ĞµÑ€]
    WordDetail -->|ĞÑÑĞ¾Ñ†Ğ¸Ğ°Ñ†Ğ¸Ñ<br/>showAssociationModal| AssocModal[ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾:<br/>ĞšĞ°Ñ€Ñ‚Ğ¸Ğ½ĞºĞ° + Ñ‚ĞµĞºÑÑ‚<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>association-modal]
    WordDetail -->|Ğ£Ñ‡Ğ¸Ñ‚ÑŒ<br/>addToStudyList| AddToStudy2[addToStudyList<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ]
    WordDetail -->|ğŸ”Š<br/>speakGerman| Speak[speakGerman<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ]

    %% Ğ¡ĞµÑÑĞ¸Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ
    Review -->|showNextCard| ReviewCard[ĞŸĞ¾ĞºĞ°Ğ· ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='card-front'<br/>Ğ¡Ğ»Ğ¾Ğ²Ğ¾ / ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´<br/>ğŸ”Š ĞÑƒĞ´Ğ¸Ğ¾]
    Practice -->|showNextCard| PracticeCard[ĞŸĞ¾ĞºĞ°Ğ· ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='card-front'<br/>Ğ¡Ğ»Ğ¾Ğ²Ğ¾ / ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´<br/>ğŸ”Š ĞÑƒĞ´Ğ¸Ğ¾]
    
    ReviewCard -->|ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚<br/>showAnswer| ShowAns1[ĞŸĞ¾ĞºĞ°Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='card-back']
    PracticeCard -->|ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚<br/>showAnswer| ShowAns2[ĞŸĞ¾ĞºĞ°Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>div id='card-back']
    
    ShowAns1 -->|ĞŸĞ¾Ğ¼Ğ½Ñ âœ“<br/>handleAnswer| Next1[Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>nextCard]
    ShowAns1 -->|ĞĞµ Ğ¿Ğ¾Ğ¼Ğ½Ñ âœ—<br/>handleAnswer| Next1
    ShowAns2 -->|ĞŸĞ¾Ğ¼Ğ½Ñ âœ“<br/>handleAnswer| Next2[Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ°<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>nextCard]
    ShowAns2 -->|ĞĞµ Ğ¿Ğ¾Ğ¼Ğ½Ñ âœ—<br/>handleAnswer| Next2
    
    Next1 -->|Ğ•Ñ‰Ñ‘ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸<br/>showNextCard| ReviewCard
    Next1 -->|ĞšĞ¾Ğ½ĞµÑ†<br/>renderAllSetsScreen| ReturnAllSets1[Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ²<br/>Ğ’ ÑƒÑ‡ĞµĞ±Ğµ<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>tempSource check]
    Next2 -->|Ğ•Ñ‰Ñ‘ ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸<br/>showNextCard| PracticeCard
    Next2 -->|ĞšĞ¾Ğ½ĞµÑ†<br/>renderAllSetsScreen| ReturnAllSets2[Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ğ²<br/>Ğ’ ÑƒÑ‡ĞµĞ±Ğµ<br/>â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br/>tempSource check]
    
    ReturnAllSets1 --> AllSets
    ReturnAllSets2 --> AllSets

    %% ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
    AddToStudy1 -.-> StudyList[(Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº<br/>Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ)]
    AddToStudy2 -.-> StudyList

    %% Ğ¡Ñ‚Ğ¸Ğ»Ğ¸
    classDef screenClass fill:#e3f2fd,stroke:#1976d2,stroke-width:3px,color:#000
    classDef modalClass fill:#fff3e0,stroke:#f57c00,stroke-width:2px,color:#000
    classDef sessionClass fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px,color:#000
    classDef actionClass fill:#e8f5e9,stroke:#388e3c,stroke-width:2px,color:#000
    classDef dataClass fill:#fce4ec,stroke:#c2185b,stroke-width:2px,color:#000

    class Home,AllSets,Topics,TopicWords,WordDetail screenClass
    class DirModal1,DirModal2,ExerciseModal,AssocModal modalClass
    class Review,Practice,ReviewCard,PracticeCard,ShowAns1,ShowAns2 sessionClass
    class AddToStudy1,AddToStudy2,Speak,Next1,Next2,ReturnAllSets1,ReturnAllSets2 actionClass
    class StudyList dataClass
