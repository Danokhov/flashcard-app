<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>–ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º API Telegram -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* –°—Ç–∏–ª–∏ –∏–∑ index.html */
        .card { perspective: 1000px; }
        .card-inner {
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .card.is-flipped .card-inner {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            top: 0; left: 0;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        
        @keyframes slide-left {
            0% { transform: translateX(0); opacity: 1; }
            100% { transform: translateX(-100%); opacity: 0; }
        }
        @keyframes slide-in-right {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .card.slide-out {
            animation: slide-left 0.4s ease forwards;
        }
        .card.slide-in {
            animation: slide-in-right 0.4s ease;
        }

        .modal {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
            transform: scale(0.95);
        }
        .modal.is-open {
            opacity: 1;
        }
        .modal.is-open .modal-content {
            transform: scale(1);
        }

        .button-locked {
            background-color: #e5e7eb; /* gray-200 */
            color: #6b7280; /* gray-500 */
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .promo-button {
            background: linear-gradient(to right, #F97316, #FBBF24); /* Orange/Amber */
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .promo-button:hover {
            box-shadow: 0 10px 15px -3px rgba(249, 115, 22, 0.5), 0 4px 6px -2px rgba(249, 115, 22, 0.2);
            transform: translateY(-2px);
        }
        
        .active-week-button {
            background: linear-gradient(to right, #3B82F6, #2563EB); /* Blue */
            color: white;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .active-week-button:hover {
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.5), 0 4px 6px -2px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .carousel-card {
            min-height: 250px;
        }

        /* –°—Ç–∏–ª–∏ –∏–∑ text1.html (–¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç–æ–≤) */
        .quiz-option { transition: all 0.15s ease; outline: none; }
        .quiz-option:hover { transform: translateY(-2px); box-shadow: 0 6px 10px -2px rgba(0,0,0,0.1); }
        .quiz-selected {
          background-color:#A5B4FC!important;
          color:#1E3A8A!important;
          border-color:#6366F1!important;
          box-shadow:0 4px 6px -1px rgba(99,102,241,0.3)!important;
        }
        .next-button-disabled {
          background-color:#D1D5DB!important;
          color:#6B7280!important;
          cursor:not-allowed;
          box-shadow:none!important;
        }
        .next-button-active {
          background:linear-gradient(to right,#4F46E5,#6366F1)!important;
          color:#fff!important;
          box-shadow:0 4px 10px -2px rgba(79,70,229,0.5);
          transition:all 0.2s ease;
        }
        .next-button-active:hover { opacity:.9; transform:translateY(-1px); }
        #question-box { border-left:5px solid #6366F1; }

        .story-visual-container img {
          width:100%;
          height:auto;
          display:block;
        }

        #audio-bar.fixed-audio-bar {
            position: fixed;
            top: env(safe-area-inset-top, 0px);
            left: 0;
            right: 0;
            z-index: 999;
            background: rgba(243, 244, 246, 0.97);
            backdrop-filter: blur(6px);
            padding-top: 0.5rem;
            padding-bottom: 0.75rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        #audio-bar.fixed-audio-bar {
            width: 100% !important;
            left: 0 !important;
            right: 0 !important;
            padding: 0.5rem 1rem !important;
            box-sizing: border-box;
        }

        #audio-bar.fixed-audio-bar > div {
            max-width: none !important;
            width: 100% !important;
            margin: 0 auto;
        }
        #audio-bar-placeholder.fixed-visible {
            height: 120px;
        }

        .audio-main-button {
          transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
        }
        .audio-main-button:hover {
          transform: translateY(-1px);
          box-shadow: 0 8px 18px rgba(37,99,235,0.55);
          opacity:.95;
        }

        input[type="range"] { width:100%; cursor:pointer; }

        .accordion-content {
          max-height:0;
          overflow:hidden;
          transition:max-height 0.4s ease-in-out,opacity 0.4s ease-in-out;
          opacity:0;
          visibility:hidden;
        }
        .accordion-content.is-open {
          max-height:90vh;
          opacity:1;
          visibility:visible;
          overflow-y:auto;
        }
    </style>
</head>

<body class="min-h-screen bg-gray-100 font-sans p-4 pb-28">

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <div id="app" class="max-w-xl mx-auto">
        
        <!-- 1. –≠–∫—Ä–∞–Ω –ó–∞–≥—Ä—É–∑–∫–∏ (–≤–∏–¥–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
        <div id="loading-screen" class="text-center py-20">
            <p class="text-gray-500">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</p>
        </div>

        <!-- 2. –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ (Home Screen) -->
        <div id="home-screen" class="hidden">
            <h1 class="text-2xl font-bold text-center mb-8 text-gray-800">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h1>
            <div class="space-y-4">

                <!-- –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –ë–õ–û–ö: –ü—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫ –ò–õ–ò –ê–∫—Ç–∏–≤–Ω–∞—è –Ω–µ–¥–µ–ª—è/–£—Ä–æ–∫–∏ –ø–æ –Ω–µ–¥–µ–ª—è–º -->
                <div id="main-content-block">
                    <!-- –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JS (–≤–∫–ª—é—á–∞–µ—Ç –ü—Ä–æ–±–Ω—ã–π, –ü–æ–¥–±–æ—Ä–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é –∏ –í—Å–µ –Ω–∞–±–æ—Ä—ã —Å–ª–æ–≤) -->
                    <!-- –ü—Ä–∏–º–µ—Ä –∫–Ω–æ–ø–∫–∏ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∏—Å—Ç–æ—Ä–∏–∏ -->
                    <button class="active-week-button w-full py-3 px-4 rounded-lg" onclick="window.App.openStoryWeek(1, '–ò—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–µ–ª–∏ 1 ‚Äî Arzttermin')">
                        –ò—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–µ–ª–∏ 1 ‚Äî Arzttermin
                    </button>
                </div>
                
                <!-- –ù–û–í–ê–Ø –°–ï–ö–¶–ò–Ø: –ì–æ—Ä—è—â–∏–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è -->
                <div id="due-today-section" class="hidden pt-6 mt-4 border-t border-gray-200">
                    <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center">
                        <span>üî• –ö –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—é —Å–µ–≥–æ–¥–Ω—è</span>
                    </h2>
                    <div id="due-today-list" class="space-y-3">
                        <!-- –°—é–¥–∞ JS –¥–æ–±–∞–≤–∏—Ç –≥–æ—Ä—è—â–∏–µ —Å–µ—Ç—ã -->
                    </div>
                </div>

            </div>
        </div>

        <!-- –î—Ä—É–≥–∏–µ —ç–∫—Ä–∞–Ω—ã –∏–∑ index.html (study-screen, finish-screen –∏ —Ç.–¥.) –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->

        <!-- –ù–æ–≤—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –ò—Å—Ç–æ—Ä–∏–π –Ω–µ–¥–µ–ª–∏ -->
        <div id="story-week-screen" class="hidden">
            <div id="story-content"></div> <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏—Å—Ç–æ—Ä–∏–∏ -->
        </div>

    </div>

    <!-- JS –∏–∑ index.html + –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è -->
    <script>
        window.App = {
            // ... –≤–µ—Å—å –∫–æ–¥ –∏–∑ —Ç–≤–æ–µ–≥–æ index.html (init, showScreen, handleTelegramBackClick –∏ —Ç.–¥.) ...

            openStoryWeek(weekNumber, title) {
                const storyContent = document.getElementById('story-content');
                storyContent.innerHTML = '';

                const stories = {
                    1: `
                        <div class="p-4 space-y-6">
                            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∏–∑ text1.html -->
                            <div class="story-visual-container rounded-xl shadow-xl overflow-hidden">
                                <img src="Woche1_text.png" alt="–ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è –∫ –∏—Å—Ç–æ—Ä–∏–∏" onclick="event.preventDefault();event.stopPropagation();">
                                <audio id="story-audio-player" src="Woche1_text.mp3"></audio>
                            </div>

                            <h1 class="text-2xl font-bold text-center text-gray-900">Der Termin beim Arzt</h1>

                            <!-- –ê—É–¥–∏–æ-–±–∞—Ä -->
                            <div id="audio-bar-wrapper">
                                <div id="audio-bar">
                                    <div class="max-w-md mx-auto">
                                        <div class="bg-white rounded-2xl px-4 py-3 shadow-lg border border-gray-200 flex flex-col gap-2">
                                            <!-- ... –≤–µ—Å—å HTML –∞—É–¥–∏–æ-–±–∞—Ä–∞, –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–æ–≤, –∫–≤–∏–∑–∞ –∏–∑ text1.html ... -->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- –ê–∫–∫–æ—Ä–¥–µ–æ–Ω—ã, –∫–≤–∏–∑ –∏ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∏–∑ text1.html -->

                            <!-- –°–∫—Ä–∏–ø—Ç StoryApp –≤ –∫–æ–Ω—Ü–µ -->
                            <script>
                                window.StoryApp = {
                                    // ... –≤–µ—Å—å JS –∏–∑ text1.html (init, playAudio, toggleAccordion, –∫–≤–∏–∑ –∏ —Ç.–¥.) ...
                                };
                                window.StoryApp.init();
                            <\/script>
                        </div>
                    `
                    // –î–æ–±–∞–≤—å –¥—Ä—É–≥–∏–µ –Ω–µ–¥–µ–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ
                };

                storyContent.innerHTML = stories[weekNumber] || '<p class="text-red-500">–ò—Å—Ç–æ—Ä–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</p>';

                this.showScreen('story-week-screen', false, { renderFunc: 'openStoryWeek', param: {weekNumber, title} });
            },

            // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ App ...
        };

        window.addEventListener('load', () => {
            // ... –∑–∞–ø—É—Å–∫ App.init() ...
        });
    </script>

</body>
</html>